Data Warehouse Custom SQL Reporting Standard Operating Procedure

Purpose

The purpose of this document is to specify the steps a user must follow to create a data warehouse query. 

Scope

This document provides instructions for Tableau custom SQL module, Tableau Desktop, and Tableau Server. 

Assumptions

The descriptions outlined in this document assume the end user is familiar with the following:
-Tableau Developer has necessary permissions. 
-Tableau Developer has knowledge of and experience with Tableau.
-Tableau Developer know how to build a SQL Query. 

Insurctions

1. Prepare to create a query by finding the report tab in the "Source to Target Mapping" document. 
2. Ensure all filters are removed. 
3. Verify that all data warehouse tables are visible. 
NOTE: These tables are needed for each report. These tables are also specific for each report. 
4. Select the drop-down from the data warehouse table. 
5. Create a unique list of these tables. 
6. Begin building the SQL query from the data warehouse, use the following as an example:

SELECT...
 FROM CORPORATE_DW.FACT_ACCOUNTING_TRAN fat
   INNER JOIN CORPORATE_DW.DIM_ACCOUNTING_TRAN dat on             fat.DIM_ACCOUNTING_TRAN_SKEY = dat.DIM_ACCOUNTING_TRAN_SKEY INNER JOIN CORPORATE_DW.DIM_ACNTG_TRAN_POST_DT pdt on fat.DIM_ACNTG_TRAN_POST_DT_KEY = pdt.DIM_ACNTG_TRAN_POST_DT_KEY
    LEFT JOIN  CORPORATE_DW.DIM_RECEIVABLE dr on fat.DIM_RECEIVABLE_SKEY = dr.DIM_RECEIVABLE_SKEY
    INNER JOIN CORPORATE_DW.DIM_RPT_GRP_TYPE rpt on fat.DIM_RPT_GRP_TYPE_SKEY = rpt.DIM_RPT_GRP_TYPE_SKEY
    LEFT JOIN  CORPORATE_DW.DIM_FINANCIAL_BUSINESS_TRAN dfbt on fat.DIM_FINANCIAL_BUSINESS_TRAN_SKEY = dfbt.DIM_FINANCIAL_BUSINESS_TRAN_SKEY
    LEFT JOIN  CORPORATE_DW.TBL_VA02_MSTR tbl on dfbt.FINCL_BUSNS_TRAN_ID = tbl.FINCL_BUSNS_TRAN_ID
WHERE fat.POST_DT >= ADD_MONTHS(SYSDATE,-12)
    AND dat.CREDIT_LEDGER_TYPE_CD = 'SGL'
    AND dat.DEBIT_LEDGER_TYPE_CD = 'SGL'

NOTE: Only include columns from the mapping document. This ensures the report stays in compliance with Tableau optimization recommendations. 
7. Apply filters to the query to limit data in the report. 
NOTE: Complex logic should be moved to the data warehouse and kept as a stored value. This minimizes processing by the Tableau query engine. 
8. Build the WHERE clause similar to the following: 

WHERE fat.POST_DT >= ADD_MONTHS(SYSDATE,-12)
    AND dat.CREDIT_LEDGER_TYPE_CD = 'SGL'
    AND dat.DEBIT_LEDGER_TYPE_CD = 'SGL'

9. Create the data source (Tableau Server). 
    a. Select New drop-down. 
    b. Select Published Data Source. 
10. Connect to the Data Warehouse in the testing environment for development, example UAT-DEVL. 
11. Select Oracle to populate a dialog. 
NOTE: This dialog displays the server, service, port, authentication, username, and password. 
12. Copy and Paste the query in the Edit Custom SQL module.
13. Make any changes, edits, formatting, and name changes on the Scratchpad tab. 
NOTE: Changes, edits, formatting, and name changes are made BEFORE publishing the data model. 
14. Select Extract and publish the new data source. 
NOTE: The 'extrct' text is not neccessary.
15. Follow Tableau best practices to enable a performant reporting architecture. 
    a. Use Context Filters. 
    b. Filter by custom query to the last 12 months of data. 
    c. Use the Workbook Optimizer and follow the recommendations. 
    d. Remove ALL unused values from the report query. 
